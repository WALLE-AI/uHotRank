# 实现计划: 前端 UI/UX 设计

## 概述

本实现计划将 UHotRank 前端应用的设计转化为可执行的开发任务。我们将使用 React 18+ 和 TypeScript 构建一个现代化、响应式的 Web 应用，采用 shadcn/ui 组件库和 ECharts 进行数据可视化。

## 任务

- [x] 1. 项目初始化和基础配置
  - 使用 Vite 创建 React + TypeScript 项目
  - 配置 Tailwind CSS
  - 安装核心依赖（React Router、Zustand、Axios、shadcn/ui、ECharts）
  - 配置 ESLint 和 Prettier
  - 设置项目目录结构
  - _需求: 所有需求的基础_

- [x] 2. 配置 shadcn/ui 和基础 UI 组件
  - 初始化 shadcn/ui
  - 安装基础 UI 组件（Button、Card、Input、Select、Dialog、Toast）
  - 配置主题系统（亮色/暗色模式）
  - 创建全局样式文件
  - _需求: 7.6_

- [x] 3. 实现类型定义和数据模型
  - 创建 Article、TechDetection、ContentAnalysis 类型
  - 创建 SearchParams、SearchResult 类型
  - 创建 Statistics、CrawlerTask 类型
  - 创建 API 响应类型
  - _需求: 所有需求的基础_

- [x] 4. 实现 API 服务层
  - [x] 4.1 配置 Axios 客户端
    - 创建 API 客户端实例
    - 配置请求/响应拦截器
    - 实现错误处理逻辑
    - _需求: 7.2_

  - [x] 4.2 实现文章服务
    - 实现 getArticles 方法
    - 实现 getArticleById 方法
    - 实现 searchArticles 方法
    - 实现 exportArticles 方法
    - _需求: 1.1, 2.1, 3.1, 9.2_

  - [x] 4.3 实现统计服务
    - 实现 getStatistics 方法
    - 实现 getKeywordStats 方法
    - 实现分类、情感、来源统计方法
    - _需求: 4.1, 4.2_

  - [x] 4.4 实现爬虫服务
    - 实现 startCrawler 方法
    - 实现 getCrawlerStatus 方法
    - 实现 stopCrawler 方法
    - _需求: 5.2, 5.6_

- [x] 5. 实现状态管理
  - [x] 5.1 创建文章 Store
    - 实现文章列表状态管理
    - 实现分页状态管理
    - 实现加载和错误状态
    - _需求: 1.1, 1.3_

  - [x] 5.2 创建搜索 Store
    - 实现搜索参数状态管理
    - 实现搜索结果状态管理
    - 实现搜索历史管理
    - _需求: 3.1, 3.6_

  - [x] 5.3 创建 UI Store
    - 实现主题切换状态
    - 实现侧边栏状态
    - 实现视图模式状态
    - _需求: 7.6_

  - [x] 5.4 创建设置 Store
    - 实现设置状态管理
    - 实现本地存储持久化
    - 实现配置验证逻辑
    - _需求: 10.2, 10.6_

- [x] 6. 实现布局组件
  - [x] 6.1 创建 AppLayout 组件
    - 实现主布局容器
    - 实现响应式布局切换
    - 集成导航栏和侧边栏
    - _需求: 6.1, 6.2, 6.3, 8.1_

  - [x] 6.2 创建 Navigation 组件
    - 实现导航栏 UI
    - 实现导航链接和路由
    - 实现当前页面高亮
    - 实现主题切换按钮
    - _需求: 8.1, 8.2, 8.3, 7.6_

  - [ ]* 6.3 编写布局组件属性测试
    - **属性 21: 当前页面导航高亮**
    - **验证: 需求 8.3**

- [x] 7. 实现文章列表功能
  - [x] 7.1 创建 ArticleCard 组件
    - 实现文章卡片 UI
    - 显示标题、来源、时间、摘要
    - 显示技术标签（条件渲染）
    - 实现点击跳转
    - _需求: 1.2, 1.4, 1.5_

  - [ ]* 7.2 编写 ArticleCard 属性测试
    - **属性 1: 文章卡片完整性**
    - **验证: 需求 1.2, 1.5**

  - [x] 7.3 创建 ArticleList 组件
    - 实现文章列表容器
    - 实现网格/列表视图切换
    - 实现无限滚动加载
    - 实现加载状态和空状态
    - _需求: 1.1, 1.3, 7.1_

  - [ ]* 7.4 编写 ArticleList 属性测试
    - **属性 16: 加载状态指示**
    - **验证: 需求 7.1**

  - [x] 7.5 创建 ArticleListPage 页面
    - 集成 ArticleList 组件
    - 实现数据加载逻辑
    - 实现错误处理
    - _需求: 1.1_

- [x] 8. 实现文章详情功能
  - [x] 8.1 创建 ArticleDetail 组件
    - 实现详情页布局
    - 显示完整文章信息
    - 显示技术检测结果（条件渲染）
    - 显示内容分析结果（条件渲染）
    - 实现原文链接（新标签页打开）
    - 实现返回按钮
    - _需求: 2.1, 2.2, 2.3, 2.4, 2.5_

  - [ ]* 8.2 编写 ArticleDetail 属性测试
    - **属性 2: 文章详情完整性**
    - **属性 3: 技术检测结果显示**
    - **属性 4: 内容分析结果显示**
    - **属性 5: 外部链接行为**
    - **验证: 需求 2.1, 2.2, 2.3, 2.4**

  - [x] 8.3 创建 ArticleDetailPage 页面
    - 集成 ArticleDetail 组件
    - 实现数据加载逻辑
    - 实现面包屑导航
    - _需求: 2.1, 8.5_

  - [ ]* 8.4 编写面包屑导航属性测试
    - **属性 22: 面包屑导航准确性**
    - **验证: 需求 8.5**

- [x] 9. 实现搜索和筛选功能
  - [x] 9.1 创建 SearchBar 组件
    - 实现搜索输入框
    - 实现搜索建议（防抖）
    - 实现搜索历史
    - 实现键盘快捷键（Ctrl/Cmd + K）
    - _需求: 3.1, 7.5_

  - [ ]* 9.2 编写 SearchBar 属性测试
    - **属性 19: 键盘快捷键响应**
    - **验证: 需求 7.5**

  - [x] 9.3 创建 FilterPanel 组件
    - 实现筛选条件面板
    - 实现技术分类多选
    - 实现来源多选
    - 实现情感单选
    - 实现日期范围选择
    - 实现清除筛选按钮
    - _需求: 3.2, 3.3, 3.4, 3.5_

  - [ ]* 9.4 编写筛选功能属性测试
    - **属性 6: 搜索结果匹配**
    - **属性 7: 分类筛选准确性**
    - **属性 8: 来源筛选准确性**
    - **属性 9: 情感筛选准确性**
    - **属性 10: 日期范围筛选准确性**
    - **属性 11: 组合筛选准确性**
    - **验证: 需求 3.1, 3.2, 3.3, 3.4, 3.5, 3.6**

  - [x] 9.5 创建 SearchResults 组件
    - 实现搜索结果展示
    - 显示结果数量统计
    - 实现排序选项
    - 高亮搜索关键词
    - _需求: 3.7_

  - [ ]* 9.6 编写搜索结果属性测试
    - **属性 12: 筛选结果计数准确性**
    - **验证: 需求 3.7**

- [x] 10. 检查点 - 确保基础功能正常
  - 确保所有测试通过，如有问题请询问用户。

- [x] 11. 实现统计和可视化功能
  - [x] 11.1 创建 StatsOverview 组件
    - 实现统计概览卡片
    - 显示文章总数、技术文章数、今日新增
    - 实现趋势指示
    - _需求: 4.1_

  - [x] 11.2 创建 KeywordCloud 组件
    - 集成 ECharts 词云图
    - 实现关键词点击搜索
    - _需求: 4.2_

  - [x] 11.3 创建图表组件
    - 创建 CategoryChart（技术分类分布）
    - 创建 SentimentChart（情感分析分布）
    - 创建 SourceChart（文章来源分布）
    - 创建 TrendChart（时间趋势图）
    - _需求: 4.3, 4.4, 4.5_

  - [x] 11.4 创建 StatisticsPage 页面
    - 集成所有统计组件
    - 实现时间范围筛选
    - 实现数据加载逻辑
    - _需求: 4.1, 4.6_

  - [ ]* 11.5 编写统计功能属性测试
    - **属性 13: 统计时间范围筛选**
    - **验证: 需求 4.6**

- [x] 12. 实现爬虫管理功能
  - [x] 12.1 创建 CrawlerControl 组件
    - 实现爬虫控制面板
    - 实现启动/停止按钮
    - 实现模式选择（全部/技术/带分析）
    - 显示任务状态
    - _需求: 5.1, 5.2, 5.4, 5.6_

  - [x] 12.2 创建 CrawlerProgress 组件
    - 实现进度条
    - 显示爬取统计（已爬取/成功/失败）
    - 实现实时更新（轮询）
    - _需求: 5.3_

  - [ ]* 12.3 编写爬虫管理属性测试
    - **属性 14: 爬虫任务状态更新**
    - **属性 15: 任务完成状态显示**
    - **验证: 需求 5.3, 5.5**

  - [x] 12.4 创建 CrawlerHistory 组件
    - 实现历史任务列表
    - 实现任务详情查看
    - _需求: 5.5_

  - [x] 12.5 创建 CrawlerManagementPage 页面
    - 集成所有爬虫管理组件
    - 实现任务状态轮询
    - _需求: 5.1_

- [x] 13. 实现数据导出功能
  - [x] 13.1 创建 ExportDialog 组件
    - 实现导出对话框
    - 实现格式选择（JSON/CSV/Excel）
    - 实现字段选择
    - 实现导出进度显示
    - _需求: 9.1, 9.3, 9.4_

  - [ ]* 13.2 编写导出功能属性测试
    - **属性 23: 导出数据匹配筛选条件**
    - **属性 24: 导出进度显示**
    - **属性 25: 文件下载触发**
    - **验证: 需求 9.2, 9.3, 9.5**

  - [x] 13.2 实现导出工具函数
    - 实现 JSON 导出
    - 实现 CSV 导出
    - 实现 Excel 导出
    - 实现文件下载触发
    - _需求: 9.2, 9.5_

- [x] 14. 实现设置功能
  - [x] 14.1 创建 SettingsPage 页面
    - 实现 Elasticsearch 连接配置表单
    - 实现显示偏好配置
    - 实现主题配置
    - 实现配置验证
    - 实现保存和测试连接功能
    - _需求: 10.1, 10.2, 10.3, 10.4, 10.5, 10.6_

  - [ ]* 14.2 编写设置功能属性测试
    - **属性 26: 配置验证**
    - **属性 27: 配置持久化**
    - **验证: 需求 10.2, 10.6**

- [x] 15. 实现通用组件和工具
  - [x] 15.1 创建通用组件
    - 创建 LoadingSpinner 组件
    - 创建 EmptyState 组件
    - 创建 ErrorBoundary 组件
    - 创建 Toast 通知系统
    - _需求: 7.1, 7.2, 7.3_

  - [ ]* 15.2 编写通用组件属性测试
    - **属性 17: 错误状态显示**
    - **属性 18: 成功反馈显示**
    - **验证: 需求 7.2, 7.3**

  - [x] 15.3 实现工具函数
    - 实现日期格式化函数
    - 实现文本截断函数
    - 实现防抖和节流函数
    - _需求: 1.2_

- [x] 16. 实现响应式设计
  - [x] 16.1 实现移动端适配
    - 调整布局为单列
    - 实现汉堡菜单
    - 优化触摸交互
    - _需求: 6.3, 8.4_

  - [x] 16.2 实现平板端适配
    - 调整布局为适合平板的布局
    - _需求: 6.2_

  - [x] 16.3 测试响应式布局
    - 测试桌面端布局
    - 测试平板端布局
    - 测试移动端布局
    - _需求: 6.1, 6.2, 6.3_

- [x] 17. 实现主题系统
  - [x] 17.1 实现主题切换功能
    - 实现亮色/暗色模式切换
    - 实现主题持久化
    - 实现系统主题跟随
    - _需求: 7.6_

  - [ ]* 17.2 编写主题切换属性测试
    - **属性 20: 主题切换持久化**
    - **验证: 需求 7.6**

- [x] 18. 性能优化
  - [x] 18.1 实现代码分割
    - 配置路由懒加载
    - 配置组件懒加载
    - _需求: 7.4_

  - [x] 18.2 实现虚拟滚动
    - 为文章列表实现虚拟滚动
    - 优化大列表性能
    - _需求: 1.3_

  - [x] 18.3 实现缓存策略
    - 实现 API 响应缓存
    - 实现图片懒加载
    - _需求: 7.4_

- [ ] 19. 集成测试和 E2E 测试
  - [ ]* 19.1 编写集成测试
    - 测试文章列表页面集成
    - 测试搜索和筛选集成
    - 测试爬虫管理集成

  - [ ]* 19.2 编写 E2E 测试
    - 测试完整的文章浏览流程
    - 测试搜索和筛选流程
    - 测试爬虫管理流程

- [ ] 20. 最终检查点 - 确保所有功能正常
  - 确保所有测试通过，如有问题请询问用户。

## 注意事项

- 标记为 `*` 的任务是可选的，可以跳过以加快 MVP 开发
- 每个任务都引用了具体的需求以确保可追溯性
- 检查点任务确保增量验证
- 属性测试验证通用正确性属性
- 单元测试验证特定示例和边缘情况
